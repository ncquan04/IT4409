import { apiService } from "./api.config";
import { Contacts } from "../../shared/contacts";

const API_PATH = Contacts.API_CONFIG;
const PAYMENT_METHOD = Contacts.PaymentMethod;
const PAYMENT_STATUS = Contacts.Status.Payment_check_update;

export const createPayment = async ({
    orderId,
    method,
}: {
    orderId: string;
    method: (typeof PAYMENT_METHOD)[keyof typeof PAYMENT_METHOD];
}) => {
    try {
        const params = new URLSearchParams();
        params.append("method", method);
        params.append("order", orderId);
        const response = await apiService.post<string>(
            API_PATH.PAYMENT.CREATE.URL + "?" + params.toString(),
        );
        return response;
    } catch (err) {
        console.log("create payment error: ", err);
        return null;
    }
};

export const CheckUpdatePayment = async ({ id }: { id: string }) => {
    try {
        const response = await apiService.get<(typeof PAYMENT_STATUS)[keyof typeof PAYMENT_STATUS]>(
            API_PATH.PAYMENT.CHECKUPDATE(id).URL,
        );
        return response;
    } catch (err: any) {
        console.log("Check update payment error: ", err);
        return null;
    }
};
